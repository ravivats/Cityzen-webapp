<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title><%= title %></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.js"></script>
  <script>
  $(document).ready(function(){
      $.fn.api.settings.api = {
        'address complain': '/address/{id}/'
      };

      $('.attached.button')
        .api({
          action: 'address complain'
        })
        .state({
          text: {
            inactive   : 'Address',
            active     : 'Address'
          }
        }).click(function(){
          var id = $(this).data("id");
          $('.card').filter(function(){ return $(this).data("id")   == id}).hide('fade');
        });        
    });
    
  </script>
</head>
<body>
    <div class="ui inverted fixed menu">
        <div class="header item">
            <img class="ui tiny image" src="../images/logo.png">
        </div>
        <div class="right menu"> 
            <a class="item" href="../admin/analysis"><i class="signal icon"></i>View Analysis</a>
        </div>
    </div>
    <div class="ui three column grid" style="margin-top: 15px;">
        <div class="column"> 
            <h3 class="ui centered header">High</h3>
            <% if(high.length <= 0) { %>
            <h4 class="ui centered header">No problems available</h4>
            <% } else{ %>
            <div class="ui fluid cards">
                <% for(var i=0; i < high.length; i++) { %>
                <div class="ui fluid card" data-id="<%= high[i]._id %>">
                    <div class="content">
                    <div class="header"><%= high[i].Subject %></div> 
                    <div class="meta">
                        <a><%= high[i].Category %></a>
                    </div>
                    <div class="description">
                        <%= high[i].Description %>
                    </div>
                    </div>
                    <div class="extra content">
                    <span class="right floated">
                        <%= high[i].FacingSince %>
                    </span>
                    <span>
                        <i class="user icon"></i>
                        <%= high[i].Approvals.length %> Approvals
                    </span>
                    </div>
                    <div class="ui bottom attached button" data-id="<%= high[i]._id %>">
                        Address
                    </div>
                </div>
                <% } %>
            </div>
            <% } %>
        </div>
        <div class="column">
            <h3 class="ui centered header">Mid</h3>
            <% if(mid.length <= 0) { %>
            <h4 class="ui centered header">No problems available</h4>
            <% } else{ %>
            <div class="ui fluid cards">
                <% for(var i=0; i < mid.length; i++) { %>
                <div class="ui fluid card" data-id="<%= mid[i]._id %>">
                    <div class="content">
                    <div class="header"><%= mid[i].Subject %></div>
                    <div class="meta">
                        <a><%= mid[i].Category %></a>
                    </div>
                    <div class="description">
                        <%= mid[i].Description %>
                    </div>
                    </div>
                    <div class="extra content">
                    <span class="right floated">
                        <%= mid[i].FacingSince %>
                    </span>
                    <span>
                        <i class="user icon"></i>
                        <%= mid[i].Approvals.length %> Approvals
                    </span>
                    </div>
                    <div class="ui bottom attached button" data-id="<%= mid[i]._id %>">
                        Address
                    </div>
                </div>
                <% } %>
            </div>
            <% } %>
        </div>
        <div class="column">
            <h3 class="ui centered header">Low</h3>
            <% if(low.length <= 0) { %>
            <h4 class="ui centered header">No problems available</h4>
            <% } else{ %>
            <div class="ui fluid cards">
                <% for(var i=0; i < low.length; i++) { %>
                <div class="ui fluid card" data-id="<%= low[i]._id %>">
                    <div class="content">
                    <div class="header"><%= low[i].Subject %></div>
                    <div class="meta">
                        <a><%= low[i].Category %></a>
                    </div>
                    <div class="description">
                        <%= low[i].Description %>
                    </div>
                    </div>
                    <div class="extra content">
                    <span class="right floated">
                        <%= low[i].FacingSince %>
                    </span>
                    <span>
                        <i class="user icon"></i>
                        <%= low[i].Approvals.length %> Approvals
                    </span>
                    </div>
                    <div class="ui bottom attached button" data-id="<%= low[i]._id %>">
                        Address
                    </div>
                </div>
                <% } %>
            </div>
            <% } %>
        </div>
    </div>
</body>
</html>